<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
  <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
  <META HTTP-EQUIV="Expires" CONTENT="0">

  <title>Sp22Anno ç®¡ç†åå°</title>

  <link href="css/bootstrap_5.1.3_.min.css" rel="stylesheet">

  <link href="css/style.css" rel="stylesheet">

  <style type="text/css">
  </style>

</head>

<body>

  <div class="bodywrap" id="bodywrap">

    <div class="page-cover" v-if="false">
      <div class="container pt-5 text-center">
        <div class="row">
          <div><h2>ç©ºé—´å…³ç³»ç†è§£æ•°æ®æ ‡æ³¨ 2022 åå°</h2></div>
        </div>
        <div class="row">
          <div>
            <p>æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™â€¦â€¦</p>
          </div>
        </div>
      </div>
    </div>

    <!-- navbar start -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="#">ç©ºé—´å…³ç³»ç†è§£æ•°æ®æ ‡æ³¨ 2022 åå°</a>
      </div>
    </nav>
    <!-- navbar end -->


    <div class="container page my-4">
      <div class="container py-2">
        <div class="row align-items-center">
          <div class="col col-12 col-md-3 col-lg-4 my-2">
            <div class="form-floating">
              <input
               class="form-control form-control-sm"
               type="text"
               v-model="ctrl.currentUser.name"
               placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å"
              >
              <label class="form-label">å§“å</label>
            </div>
          </div>
          <div class="col col-12 col-md-9 col-lg-8 my-2">
            <div class="form-floating">
              <input
               class="form-control form-control-sm"
               type="password"
               v-model="ctrl.currentUser.token"
               placeholder="è¯·è¾“å…¥æ‚¨çš„å¯†ç "
              >
              <label class="form-label">å¯†ç </label>
            </div>
          </div>
        </div>
        <div class="row align-items-center my-2">
          <div class="col col-12">
            <div>ä¸Šæ¬¡åˆ·æ–°æ•´ä¸ªæ•°æ®åº“çš„æ—¶é—´æ˜¯ {{ctrl.lastTime}} ã€‚</div>
            <div>ä¸Šæ¬¡åˆ·æ–° User è¡¨çš„æ—¶é—´æ˜¯ {{ctrl.lastTimeDict?.users}} ã€‚</div>
            <div>ä¸Šæ¬¡åˆ·æ–° Task è¡¨çš„æ—¶é—´æ˜¯ {{ctrl.lastTimeDict?.tasks}} ã€‚</div>
            <div>ä¸Šæ¬¡åˆ·æ–° Anno è¡¨çš„æ—¶é—´æ˜¯ {{ctrl.lastTimeDict?.annos}} ã€‚</div>
            <div>ä¸Šæ¬¡åˆ·æ–° Entry è¡¨çš„æ—¶é—´æ˜¯ {{ctrl.lastTimeDict?.entries}} ã€‚</div>
          </div>
          <div class="col col-12">
            <button
              type="button"
              class="btn btn-sm me-2 my-1"
              :class="{'btn-outline-success': theDB.users?.length, 'btn-outline-primary': !theDB.users?.length}"
              @click="()=>{sync()}"
              title="ä»æœåŠ¡å™¨æ›´æ–°æœ€æ–°æ•°æ®ï¼ŒåŒ…æ‹¬ User, Task, Anno è¡¨ï¼Œä»¥åŠ Entry è¡¨ä¸­çš„åŸºæœ¬ä¿¡æ¯"
            >åˆ·æ–°å…¨éƒ¨</button>
            <button
              type="button"
              class="btn btn-sm me-2 my-1"
              :class="{'btn-outline-success': theDB.users?.length, 'btn-outline-primary': !theDB.users?.length}"
              @click="()=>{syncUser()}"
              title="ä»æœåŠ¡å™¨æ›´æ–° User è¡¨"
            >åˆ·æ–° User è¡¨</button>
            <button
              type="button"
              class="btn btn-sm me-2 my-1"
              :class="{'btn-outline-success': theDB.tasks?.length, 'btn-outline-primary': !theDB.tasks?.length}"
              @click="()=>{syncTask()}"
              title="ä»æœåŠ¡å™¨æ›´æ–° Task è¡¨"
            >åˆ·æ–° Task è¡¨</button>
            <button
              type="button"
              class="btn btn-sm me-2 my-1"
              :class="{'btn-outline-success': theDB.annos?.length, 'btn-outline-primary': !theDB.annos?.length}"
              @click="()=>{syncAnno()}"
              title="ä»æœåŠ¡å™¨æ›´æ–° Anno è¡¨"
            >åˆ·æ–° Anno è¡¨</button>
            <button
              type="button"
              class="btn btn-sm me-2 my-1"
              :class="{'btn-outline-success': theDB.entries?.length, 'btn-outline-primary': !theDB.entries?.length}"
              @click="()=>{syncEntryInfo()}"
              title="ä»æœåŠ¡å™¨æ›´æ–° Entry è¡¨ï¼ˆä»…åŸºæœ¬ä¿¡æ¯ï¼‰"
            >åˆ·æ–° Entry è¡¨ï¼ˆä»…åŸºæœ¬ä¿¡æ¯ï¼‰</button>
            <button
              type="button"
              class="btn btn-sm me-2 my-1"
              :class="{'btn-outline-success': theDB.entries?.length, 'btn-outline-primary': !theDB.entries?.length}"
              @click="modalBox_open('upload-entries')"
              title="å› ç½‘ç»œä¼ è¾“ä¸å¤ªç¨³å®šï¼Œè€Œè¯­æ–™åº“è¾ƒå¤§ï¼Œæ•…è¯·ä»æœ¬åœ°é€‰æ‹©è¯­æ–™åº“æ–‡ä»¶è¿›è¡ŒåŠ è½½"
            >å¯¼å…¥ è¯­æ–™(Entry) è¡¨</button>
          </div>
        </div>
      </div>
    </div>

    <div class="container page my-4">
      <div class="container py-2">
        <div class="row mt-2 mb-4">
          <div class="col">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                <a class="nav-link" :class="ctrl.tab == TABS.overview ? 'active' : ''" href="#" @click="goTab('overview')">æ€»ä½“è¿›åº¦</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" :class="ctrl.tab == TABS.entryAndTask ? 'active' : ''" href="#" @click="goTab('entryAndTask')">æ ‡æ³¨è¯¦æƒ…</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" :class="ctrl.tab == TABS.userProgress ? 'active' : ''" href="#" @click="goTab('userProgress')">ç”¨æˆ·è¿›åº¦</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" :class="ctrl.tab == TABS.userInfo ? 'active' : ''" href="#" @click="goTab('userInfo')">ç”¨æˆ·ä¿¡æ¯</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" :class="ctrl.tab == TABS.taskAssign ? 'active' : ''" href="#" @click="goTab('taskAssign')">åˆ†é…ä»»åŠ¡</a>
              </li>
            </ul>
          </div>
        </div>






        <div class="row align-items-center my-2" v-show="ctrl.tab == TABS.overview">
          <div class="col col-12">
            <div>è¯­æ–™æ€»é‡ï¼šä¸€å…±æœ‰å¤šå°‘ï¼Œå…¶ä¸­åˆ é™¤çš„ä¸€å…±æœ‰å¤šå°‘ã€‚</div>
            <div>çº¯åŸå¥å¤šå°‘ï¼Œæ›¿æ¢å¥å¤šå°‘ï¼Œæ›¿æ¢å¥å¯¹å¤šå°‘ã€‚ä»»åŠ¡æ˜¯å¦å·²è®¾ç½®ã€‚</div>
            <div>æ€»ä½“æƒ…å†µï¼š</div>
            <ul>
              <li>æ€»ä»»åŠ¡é‡ï¼š{{ tasks_computed.total.total_num }}</li>
              <li>å·²åˆ†é…é‡ï¼š{{ tasks_computed.total.assigned_num }}</li>
              <li>éè¶³é‡æäº¤ï¼š{{ tasks_computed.total.working_num }}</li>
              <li>å·²è¶³é‡æäº¤ï¼š{{ tasks_computed.total.done_num }}</li>
            </ul>
            <div>å„ç±»å‹æƒ…å†µï¼š</div>
            <ul>
              <li v-for="pair in tasks_computed.by_topic">
                <span>{{pair[0]}}</span><span>ï¼š</span>
                <ul>
                  <li>æ€»é‡ï¼š{{pair[1]?.total_num}}</li>
                  <li>å·²åˆ†é…ï¼š{{pair[1]?.assigned_num}}</li>
                  <li>éè¶³é‡æäº¤ï¼š{{pair[1]?.working_num}}</li>
                  <li>å·²è¶³é‡æäº¤ï¼š{{pair[1]?.done_num}}</li>
                </ul>
              </li>
            </ul>
          </div>
        </div>








        <div class="row align-items-center my-2" v-show="ctrl.tab == TABS.taskAssign">
          <div class="col col-12">
            <div>è¯·è¿›è¡Œå‚æ•°è®¾ç½®ï¼š</div>
          </div>
          <div class="col col-12 col-sm-6 col-lg-4 my-2">
            <label class="form-label">ä»»åŠ¡ç±»å‹</label>
            <select
             class="form-select form-select-sm"
             v-model="assignData.settings.topic"
            >
              <option v-for="topic in assignTopics" :value="topic.value">{{topic.desc}}</option>
            </select>
          </div>
          <div class="col col-12 col-sm-6 col-lg-4 my-2">
            <label class="form-label">æ¯ä¸ªç”¨æˆ·å¤šå°‘ä»»åŠ¡</label>
            <input
             class="form-control form-control-sm"
             type="number"
             v-model="assignData.settings.tasks_per_user"
            >
          </div>
          <div class="col col-12 col-sm-6 col-lg-4 my-2">
            <label class="form-label">æ¯ä¸ªä»»åŠ¡éœ€è¦å‡ åç”¨æˆ·å‚ä¸</label>
            <input
             class="form-control form-control-sm"
             type="number"
             v-model="assignData.settings.users_per_task"
            >
          </div>
          <div class="col col-12">
            <label class="form-label">æµ‹è°é¢˜è®¾ç½®ï¼ˆJsonå­—ç¬¦ä¸²ï¼‰</label>
            <textarea
              class="form-control form-control-sm"
              v-model="assignData.settings.polygraphs_per_user_json_string"
              :class="{'is-invalid': assignData.polygraphs_per_user_json_string_error}"
            ></textarea>
            <div
              class="invalid-feedback"
              v-show="assignData.polygraphs_per_user_json_string_error"
            >Jsonè§£æå¤±è´¥ï¼Œè¯·æ£€æŸ¥</div>
          </div>
        </div>



        <div class="row align-items-center my-2" v-show="ctrl.tab == TABS.taskAssign">
          <div class="col col-12">
            <button
              type="button"
              class="btn btn-sm me-2 my-1 btn-outline-primary"
              @click="planAssigment"
              title="å¯¹ä»»åŠ¡åˆ†é…è¿›è¡Œè§„åˆ’"
            >å¼€å§‹è§„åˆ’</button>
          </div>
          <template v-if="assignData.analysis.length">
            <div class="col col-12">
              <h4 class="mt-3 mb-2">{{ assignData.undone ? 'è§„åˆ’' : 'æ‰§è¡Œ'}}ç»“æœ</h4>
            </div>
            <div class="col col-12 my-2">
              <div class="fw-bold">å…·ä½“åˆ°æ¯ä¸ªæ ‡æ³¨è€…ï¼š</div>
            </div>
            <div class="col col-12">
              <ul class="list-group max-vh-40 overflow-auto border border-1">
                <li class="list-group-item" v-for="pair in assignData.planPerUser">
                  <div>
                    <span>{{ `#${pair[0]} ${theDB.userDict[pair[0]].name}` }}</span> åˆ†é…åˆ°çš„ {{pair[1]?.length}} æ¡ä»»åŠ¡æ˜¯ï¼š
                  </div>
                  <div>
                    <button
                      v-for="task_id in pair[1]"
                      type="button"
                      class="btn btn-sm me-2 my-1"
                      :class="theDB.entryDict[theDB.taskDict[task_id]?.entry]?.polygraph ? 'btn-warning' : 'btn-light'"
                    >#{{ task_id }}</button>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col col-12 my-2">
              <div class="fw-bold">å…·ä½“åˆ°æ¯ä¸ªä»»åŠ¡ï¼š</div>
            </div>
            <div class="col col-12">
              <ul class="list-group max-vh-40 overflow-auto border border-1">
                <li class="list-group-item" v-for="item in assignData.analysis">
                  <div>
                    <span>ã€Œ{{item?.plan?.topic}} ä»»åŠ¡ #{{item.id}}</span><span></span> / <span></span><span>è¯­æ–™ #{{item?.plan?.entry}}ã€</span>
                    <!-- <br v-if="item.new_to?.length"/> -->
                    <span v-if="item.new_to?.length">
                      åˆ†é…ç»™ï¼š
                      <span class="me-2 text-success __fw-bold" v-for="guy in item.new_guys">#{{guy}} {{theDB.userDict[guy]?.name}}</span>
                      <span class="me-2" v-for="guy in item.solid_guys">#{{guy}} {{theDB.userDict[guy]?.name}}</span>
                      ã€‚
                    </span>
                    <!-- <br v-if="item.canceled_guys?.length"/> -->
                    <span v-if="item.canceled_guys?.length" class="text-muted">
                      ä¸å†åˆ†é…ç»™ï¼š
                      <s class="me-2" v-for="guy in item.canceled_guys">#{{guy}} {{theDB.userDict[guy]?.name}}</s>
                      ã€‚
                    </span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col col-12 my-2">
              <button
                type="button"
                class="btn btn-sm me-2 my-1 btn-danger"
                __click="doAssigment"
                @click="modalBox_open('confirm', {desc: 'ç¡®å®šè¦æ‰§è¡Œè§„åˆ’å¥½çš„ä»»åŠ¡å®‰æ’å—ï¼Ÿ', action: doAssigment})"
                title="å¼€å§‹æ‰§è¡Œè§„åˆ’å¥½çš„ä»»åŠ¡å®‰æ’"
                v-if="assignData.undone"
              >å¼€å§‹æ‰§è¡Œ</button>
              <button
                type="button"
                class="btn btn-sm me-2 my-1 btn-primary"
                __click="doAssigment"
                @click="exportPlan"
                title="å¼€å§‹æ‰§è¡Œè§„åˆ’å¥½çš„ä»»åŠ¡å®‰æ’"
                v-if="assignData.undone"
              >å¯¼å‡ºè®¡åˆ’</button>
              <button
                type="button"
                class="btn btn-sm me-2 my-1"
                :class="assignData.undone ? 'btn-outline-secondary' : 'btn-outline-success'"
                @click="()=>{if(assignData.undone){cancelAssigment();}else{cleanAssigment();}}"
                :title="assignData.undone ? 'æ’¤é™¤è§„åˆ’å¥½çš„ä»»åŠ¡å®‰æ’' : 'æ¸…é™¤ä»¥ä¸Šä¿¡æ¯'"
              >{{ assignData.undone ? 'æ’¤é™¤è§„åˆ’' : 'çŸ¥é“äº†ï¼Œæ¸…é™¤'}}</button>
            </div>
            <div class="col col-12 my-2" v-if="'inserted' in assignData.result">
              <div>æ‰§è¡Œç»“æœï¼š</div>
            </div>
            <div class="col col-12 my-2" v-if="'inserted' in assignData.result">
              <div>ä¿®æ”¹ï¼š {{ assignData.result.replaced }}</div>
              <div>æ–°å¢ï¼š {{ assignData.result.inserted }}</div>
              <div>å¼‚å¸¸ï¼š {{ assignData.result.strange }}</div>
            </div>
          </template>
        </div>




        <div class="row align-items-center my-2" v-show="ctrl.tab == TABS.userProgress">
          <div class="col col-12">
            <table class="table table-sm table-bordered table-striped table-hover">
              <thead class="text-center">
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">å°ç»„</th>
                  <th scope="col">è´Ÿè´£äºº</th>
                  <th scope="col">å§“å</th>
                  <th scope="col">è§’è‰²</th>
                  <th scope="col">ä»»åŠ¡ç±»å‹</th>
                  <th scope="col">æ­¤ç±»è¿›åº¦</th>
                  <th scope="col">ç´¯è®¡</th>
                  <th scope="col">æ“ä½œ</th>
                </tr>
              </thead>
              <tbody class="text-center">
                <tr v-for="user in theDB.users" :key="user.id" class="align-middle">
                  <td>{{user.id}}</td>
                  <td>{{user.currTaskGroup}}</td>
                  <td>{{theDB.userDict[user.manager]?.name}}</td>
                  <td>{{user.name}}<span v-if="user.quitted" class="badge rounded-pill bg-danger ms-2">å·²é€€å‡º</span></td>
                  <td><span v-for="role in user.role" class="badge rounded-pill bg-primary me-1">{{role}}</span></td>
                  <td>{{topic2using(user.currTask)}}</td>
                  <td>
                    <div class="progress" :class="{'bg-success bg-opacity-25': userProgress(user).done}" title="æ ‡æ³¨è¿›åº¦">
                      <div
                        class="progress-bar bg-success"
                        role="progressbar"
                        :style="`width: ${userProgress(user).pct};`"
                        :aria-valuenow="userProgress(user).mn"
                        :aria-valuemax="userProgress(user).bg"
                        aria-valuemin="0"
                      >{{ userCurrDoneTasks(user).length }}/{{ userCurrTasks(user).length }}</div>
                    </div>
                  </td>
                  <td>{{user.allAnnos?.length}}</td>
                  <td>
                    <button
                      type="button"
                      class="btn btn-sm me-2 my-1 btn-outline-secondary"
                      :title="`æŸ¥çœ‹${user.name}æ‰€æ ‡æ³¨çš„å…·ä½“æƒ…å†µ`"
                    >æŸ¥çœ‹è¯¦æƒ…</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row align-items-center my-2" v-show="ctrl.tab == TABS.userInfo">
          <div class="col col-12">
            <table class="table table-sm table-bordered table-striped table-hover">
              <thead class="text-center">
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">å°ç»„</th>
                  <th scope="col">è´Ÿè´£äºº</th>
                  <th scope="col">å§“å</th>
                  <th scope="col">è§’è‰²</th>
                  <th scope="col">ä»»åŠ¡ç±»å‹</th>
                  <!-- <th scope="col">æœºæ„ç®€ç§°</th> -->
                  <th scope="col">æœºæ„</th>
                  <!-- <th scope="col">ç”µè¯</th>
                  <th scope="col">é‚®ç®±</th>
                  <th scope="col">å¾®ä¿¡</th>
                  <th scope="col">å…¶ä»–</th> -->
                  <th scope="col">æ“ä½œ</th>
                </tr>
              </thead>
              <tbody class="text-center">
                <tr v-for="user in theDB.users" :key="user.id" class="align-middle">
                  <td>{{user.id}}</td>
                  <td>{{user.currTaskGroup}}</td>
                  <td>{{theDB.userDict[user.manager]?.name}}</td>
                  <td>{{user.name}}<span v-if="user.quitted" class="badge rounded-pill bg-danger ms-2">å·²é€€å‡º</span></td>
                  <td><span v-for="role in user.role" class="badge rounded-pill bg-primary me-1">{{role}}</span></td>
                  <td>{{topic2using(user.currTask)}}</td>
                  <!-- <td>{{user?.info?.inst_abbr}}</td> -->
                  <td>{{user?.info?.institution}}</td>
                  <!-- <td>{{user?.info?.phone}}</td>
                  <td>{{user?.info?.email}}</td>
                  <td>{{user?.info?.wechat}}</td>
                  <td>{{user?.info?.other}}</td> -->
                  <td>
                    <button
                      type="button"
                      class="btn btn-sm me-2 my-1 btn-outline-secondary"
                      :title="`æŸ¥çœ‹æ›´å¤šå…³äº${user.name}çš„ä¿¡æ¯`"
                      @click="modalBox_open('user-detail', user)"
                    >æ›´å¤šä¿¡æ¯</button>
                    <button
                      type="button"
                      class="btn btn-sm me-2 my-1 btn-outline-secondary btn-copy-token"
                      :title="`ç‚¹å‡»æ‹·è´${user.name}çš„å¯†ç `"
                      :data-clipboard-text="`${user.name}çš„å¯†ç æ˜¯ï¼š ${user.token}`"
                    >æ‹·è´å¯†ç </button>
                    <button
                      type="button"
                      v-if="!user.quitted"
                      class="btn btn-sm me-2 my-1 btn-outline-secondary"
                      :title="`ç»™${user.name}æ·»åŠ â€œå·²é€€å‡ºâ€æ ‡è®°`"
                      @click="modalBox_open('user-set-quitted', user)"
                    >æ ‡è®°é€€å‡º</button>
                    <button
                      type="button"
                      v-if="user.quitted"
                      class="btn btn-sm me-2 my-1 btn-outline-secondary"
                      :title="`ä¸º${user.name}ç§»é™¤â€œå·²é€€å‡ºâ€æ ‡è®°`"
                      @click="modalBox_open('user-unset-quitted', user)"
                    >ä¸å†é€€å‡º</button>
                    <button
                      type="button"
                      class="btn btn-sm me-2 my-1 btn-outline-secondary"
                      :title="`å¯¹${user.name}çš„ä¿¡æ¯è¿›è¡Œè¯¦ç»†ç¼–è¾‘`"
                      @click="modalBox_open('user-edit', user)"
                    >ç¼–è¾‘</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>



    <!-- Modal -->
    <div class="modal-wrap" style="display: block;" ref="modal_wrap">
      <div class="modal" v-show="modalBox.data.show" :class="{show: modalBox.data.show}">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">


          <div class="modal-content" v-if="MODAL_THEMES[modalBox.data.theme] == MODAL_THEMES['default']">
            <div class="modal-body">
              <div class="row align-items-center my-2">
                <div class="col-12">
                  <p>ğŸ˜„</p>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-sm btn-secondary" @click="()=>{modalBox.hide()}">å–æ¶ˆ</button>
              <button type="button" class="btn btn-sm btn-primary" @click="()=>{modalBox.hide()}">ç¡®å®š</button>
            </div>
          </div>


          <div class="modal-content" v-if="MODAL_THEMES[modalBox.data.theme] == MODAL_THEMES['confirm']">
            <div class="modal-body">
              <div class="row align-items-center my-2">
                <div class="col-12">
                  <p>{{ modalBox.data.kwargs.desc }}</p>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-sm btn-secondary" @click="()=>{modalBox.hide();}">å–æ¶ˆ</button>
              <button type="button" class="btn btn-sm btn-primary" @click="()=>{modalBox.data.kwargs.action();modalBox.hide();}">ç¡®å®š</button>
            </div>
          </div>


          <div class="modal-content" v-if="modalBox.data.theme == MODAL_THEMES['user-set-quitted']">
            <div class="modal-body">
              <div class="row align-items-center my-2">
                <div class="col-12">
                  <p>ç¡®å®šè¦å°†ç”¨æˆ· {{modalBox.data.kwargs?.name}} æ ‡è®°ä¸ºâ€œå·²é€€å‡ºâ€å—ï¼Ÿ</p>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-sm btn-secondary" @click="()=>{modalBox.hide()}">å–æ¶ˆ</button>
              <button type="button" class="btn btn-sm btn-danger" @click="setAsQuitted(modalBox.data.kwargs)">ç¡®å®š</button>
            </div>
          </div>


          <div class="modal-content" v-if="modalBox.data.theme == MODAL_THEMES['user-unset-quitted']">
            <div class="modal-body">
              <div class="row align-items-center my-2">
                <div class="col-12">
                  <p>ç¡®å®šè¦å»é™¤ç”¨æˆ· {{modalBox.data.kwargs?.name}} çš„â€œå·²é€€å‡ºâ€æ ‡è®°å—ï¼Ÿ</p>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-sm btn-secondary" @click="()=>{modalBox.hide()}">å–æ¶ˆ</button>
              <button type="button" class="btn btn-sm btn-danger" @click="setNotQuitted(modalBox.data.kwargs)">ç¡®å®š</button>
            </div>
          </div>


          <div class="modal-content" v-if="modalBox.data.theme == MODAL_THEMES['upload-entries']">
            <!-- <div class="modal-header">
              <h5 class="modal-title">Modal title</h5>
              <button type="button" class="btn-close"></button>
            </div> -->
            <div class="modal-body">
              <form class="row align-items-center my-2" name="file-form" id="filePicker">
                <div class="col-md-8 my-2">
                  <input
                    type="file"
                    class="form-control form-control-sm"
                    name="file-input"
                    id="file-input"
                    accept=".json, .txt"
                  />
                </div>
                <div class="btn-group btn-group-sm col-md-4 my-2">
                  <button
                    v-if="ctrl?.currentWorker?.length"
                    type="button"
                    name="do_import"
                    id="do_import"
                    @click="ioC.onImport(win.document)"
                    class="btn btn-primary"
                  >å¯¼å…¥</button>
                  <button
                    v-if="!dfWrap?.dataItems?.length && ctrl.haveStore && ctrl?.currentWorker?.length"
                    type="button"
                    name="do_loadStore"
                    id="do_loadStore"
                    @click="ioC.loadStore()"
                    class="btn btn-success"
                  >åŠ è½½ç¼“å­˜æ•°æ®</button>
                  <button
                    :disabled="!dfWrap?.dataItems?.length"
                    type="button"
                    name="do_export"
                    id="do_export"
                    @click="ioC.onExport()"
                    class="btn btn-info"
                  >å¯¼å‡º</button>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-sm btn-secondary" @click="()=>{modalBox.hide()}">Close</button>
            </div>
          </div>


        </div>
      </div>
    </div>


    <!-- Alert -->
    <div class="alert-wrap" style="display: block;" ref="alert_wrap">
      <transition name="fade" v-for="alert in alertBox.data.alerts">
        <div v-show="alert?.show" class="alert alert-dismissible" :class="'alert-'+(alert?.type ?? 'info')">
          <button type="button" class="btn-close" @click="alertBox.removeAlert(alert?.idx)"></button>
          <div>{{alert?.content}}</div>
        </div>
      </transition>
    </div>

  </div>
  <!-- bodywrap end -->

  <script type="module" src="js/manage.mjs.js"></script>
</body>

</html>
